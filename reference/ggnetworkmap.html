<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Network plot map overlay — ggnetworkmap • GGally</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Network plot map overlay — ggnetworkmap"><meta property="og:description" content="Plots a network with ggplot2 suitable for overlay on a ggmap plot or ggplot2"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">GGally</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">Generic plot matrix</li>
    <li>
      <a href="../articles/ggpairs.html">ggpairs(): Pairwise plot matrix</a>
    </li>
    <li>
      <a href="../articles/ggduo.html">ggduo(): Two-grouped plot matrix</a>
    </li>
    <li>
      <a href="../articles/ggmatrix.html">ggmatrix(): Plot matrix</a>
    </li>
    <li>
      <a href="../articles/ggally_plots.html">ggally_*(): List of available high-level plots</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Specialized plot matrix</li>
    <li>
      <a href="../articles/ggbivariate.html">ggbivariate(): Plot an outcome with several potential explanatory variables</a>
    </li>
    <li>
      <a href="../articles/ggnostic.html">ggnostic(): Model diagnostics</a>
    </li>
    <li>
      <a href="../articles/ggscatmat.html">ggscatmat(): Numeric pairwise plot matrix</a>
    </li>
    <li>
      <a href="../articles/ggtable.html">ggtable(): Cross-tabulated tables</a>
    </li>
    <li>
      <a href="../articles/ggally_stats.html">stat_*(): Additional statistics for ggplot2</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Specialized ggplot2 plot</li>
    <li>
      <a href="../articles/ggcoef_model.html">ggcoef_model(): Model coefficients</a>
    </li>
    <li>
      <a href="../articles/ggcoef.html">ggcoef(): Model coefficients</a>
    </li>
    <li>
      <a href="../articles/ggnetworkmap.html">ggnetworkmap(): Network + map plot</a>
    </li>
    <li>
      <a href="../articles/ggsurv.html">ggsurv(): Survival curves</a>
    </li>
    <li>
      <a href="../articles/glyph.html">glyphs(): Glyph plot</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ggobi/ggally/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Network plot map overlay</h1>
    <small class="dont-index">Source: <a href="https://github.com/ggobi/ggally/blob/HEAD/R/ggnetworkmap.R" class="external-link"><code>R/ggnetworkmap.R</code></a></small>
    <div class="hidden name"><code>ggnetworkmap.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Plots a network with <span class="pkg">ggplot2</span> suitable for overlay on a <span class="pkg">ggmap</span> plot or <span class="pkg">ggplot2</span></p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ggnetworkmap</span><span class="op">(</span></span>
<span>  <span class="va">gg</span>,</span>
<span>  <span class="va">net</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>  <span class="va">weight</span>,</span>
<span>  <span class="va">node.group</span>,</span>
<span>  node.color <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  node.alpha <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">ring.group</span>,</span>
<span>  segment.alpha <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  segment.color <span class="op">=</span> <span class="st">"grey"</span>,</span>
<span>  great.circles <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  segment.size <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  arrow.size <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  label.nodes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  label.size <span class="op">=</span> <span class="va">size</span><span class="op">/</span><span class="fl">2</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>gg</dt>
<dd><p>an object of class <code>ggplot</code>.</p></dd>


<dt>net</dt>
<dd><p>an object of class <code><a href="https://rdrr.io/pkg/network/man/network.html" class="external-link">network</a></code>, or any object
that can be coerced to this class, such as an adjacency or incidence matrix,
or an edge list: see <a href="https://rdrr.io/pkg/network/man/edgeset.constructors.html" class="external-link">edgeset.constructors</a> and
<a href="https://rdrr.io/pkg/network/man/network.html" class="external-link">network</a> for details. If the object is of class
igraph and the
<a href="https://rdrr.io/pkg/intergraph/man/intergraph-package.html" class="external-link">intergraph</a> package is installed,
it will be used to convert the object: see
<code><a href="https://rdrr.io/pkg/intergraph/man/asNetwork.html" class="external-link">asNetwork</a></code> for details.</p></dd>


<dt>size</dt>
<dd><p>size of the network nodes. Defaults to 3. If the nodes are weighted, their area is proportionally scaled up to the size set by <code>size</code>.</p></dd>


<dt>alpha</dt>
<dd><p>a level of transparency for nodes, vertices and arrows. Defaults to 0.75.</p></dd>


<dt>weight</dt>
<dd><p>if present, the unquoted name of a vertex attribute in <code>data</code>.  Otherwise nodes are unweighted.</p></dd>


<dt>node.group</dt>
<dd><p><code>NULL</code>, the default, or the unquoted name of a vertex attribute that will be used to determine the color of each node.</p></dd>


<dt>node.color</dt>
<dd><p>If <code>node.group</code> is null, a character string specifying a color.</p></dd>


<dt>node.alpha</dt>
<dd><p>transparency of the nodes. Inherits from <code>alpha</code>.</p></dd>


<dt>ring.group</dt>
<dd><p>if not <code>NULL</code>, the default, the unquoted name of a vertex attribute that will be used to determine the color of each node border.</p></dd>


<dt>segment.alpha</dt>
<dd><p>transparency of the vertex links. Inherits from <code>alpha</code></p></dd>


<dt>segment.color</dt>
<dd><p>color of the vertex links. Defaults to <code>"grey"</code>.</p></dd>


<dt>great.circles</dt>
<dd><p>whether to draw edges as great circles using the <code>geosphere</code> package.  Defaults to <code>FALSE</code></p></dd>


<dt>segment.size</dt>
<dd><p>size of the vertex links, as a vector of values or as a single value. Defaults to 0.25.</p></dd>


<dt>arrow.size</dt>
<dd><p>size of the vertex arrows for directed network plotting, in centimeters. Defaults to 0.</p></dd>


<dt>label.nodes</dt>
<dd><p>label nodes with their vertex names attribute. If set to <code>TRUE</code>, all nodes are labelled. Also accepts a vector of character strings to match with vertex names.</p></dd>


<dt>label.size</dt>
<dd><p>size of the labels.  Defaults to <code>size / 2</code>.</p></dd>


<dt>...</dt>
<dd><p>other arguments supplied to geom_text for the node labels. Arguments pertaining to the title or other items can be achieved through <span class="pkg">ggplot2</span> methods.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>This is a descendant of the original <code>ggnet</code> function.  <code>ggnet</code> added the innovation of plotting the network geographically.
However, <code>ggnet</code> needed to be the first object in the ggplot chain.  <code>ggnetworkmap</code> does not.  If passed a <code>ggplot</code> object as its first argument,
such as output from <code>ggmap</code>, <code>ggnetworkmap</code> will plot on top of that chart, looking for vertex attributes <code>lon</code> and <code>lat</code> as coordinates.
Otherwise, <code>ggnetworkmap</code> will generate coordinates using the Fruchterman-Reingold algorithm.</p>
<p>This is a function for plotting graphs generated by <code>network</code> or <code>igraph</code> in a more flexible and elegant manner than permitted by ggnet.  The function does not need to be the first plot in the ggplot chain, so the graph can be plotted on top of a map or other chart.  Segments can be straight lines, or plotted as great circles.  Note that the great circles feature can produce odd results with arrows and with vertices beyond the plot edges; this is a <span class="pkg">ggplot2</span> limitation and cannot yet be fixed.  Nodes can have two color schemes, which are then plotted as the center and ring around the node.  The color schemes are selected by adding scale_fill_ or scale_color_ just like any other <span class="pkg">ggplot2</span> plot. If there are no rings, scale_color sets the color of the nodes.  If there are rings, scale_color sets the color of the rings, and scale_fill sets the color of the centers.  Note that additional arguments in the ... are passed to geom_text for plotting labels.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Amos Elberg. Original by Moritz Marbach, Francois Briatte</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># small function to display plots only if it's interactive</span></span></span>
<span class="r-in"><span><span class="va">p_</span> <span class="op">&lt;-</span> <span class="fu">GGally</span><span class="fu">::</span><span class="va"><a href="print_if_interactive.html">print_if_interactive</a></span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ggplot2"</span>, <span class="st">"maps"</span>, <span class="st">"network"</span>, <span class="st">"sna"</span><span class="op">)</span>, <span class="fu">base</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span>, character.only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: statnet.common</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘statnet.common’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     attr, order</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> sna: Tools for Social Network Analysis</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Version 2.7-2 created on 2023-12-05.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> copyright (c) 2005, Carter T. Butts, University of California-Irvine</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  For citation information, type citation("sna").</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Type help(package="sna") to get started.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Example showing great circles on a simple map of the USA</span></span></span>
<span class="r-in"><span><span class="co">## http://flowingdata.com/2011/05/11/how-to-map-connections-with-great-circles/</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">airports</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"http://datasets.flowingdata.com/tuts/maparcs/airports.csv"</span>, header <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">airports</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">airports</span><span class="op">$</span><span class="va">iata</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># select some random flights</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">flights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  origin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">airports</span><span class="op">[</span><span class="fl">200</span><span class="op">:</span><span class="fl">400</span>, <span class="op">]</span><span class="op">$</span><span class="va">iata</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  destination <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">airports</span><span class="op">[</span><span class="fl">200</span><span class="op">:</span><span class="fl">400</span>, <span class="op">]</span><span class="op">$</span><span class="va">iata</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># convert to network</span></span></span>
<span class="r-in"><span><span class="va">flights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/network/man/network.html" class="external-link">network</a></span><span class="op">(</span><span class="va">flights</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add geographic coordinates</span></span></span>
<span class="r-in"><span><span class="va">flights</span> <span class="op"><a href="https://rdrr.io/pkg/network/man/network.extraction.html" class="external-link">%v%</a></span> <span class="st">"lat"</span> <span class="op">&lt;-</span> <span class="va">airports</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/pkg/network/man/attribute.methods.html" class="external-link">network.vertex.names</a></span><span class="op">(</span><span class="va">flights</span><span class="op">)</span>, <span class="st">"lat"</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">flights</span> <span class="op"><a href="https://rdrr.io/pkg/network/man/network.extraction.html" class="external-link">%v%</a></span> <span class="st">"lon"</span> <span class="op">&lt;-</span> <span class="va">airports</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/pkg/network/man/attribute.methods.html" class="external-link">network.vertex.names</a></span><span class="op">(</span><span class="va">flights</span><span class="op">)</span>, <span class="st">"long"</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># drop isolated airports</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/network/man/deletion.methods.html" class="external-link">delete.vertices</a></span><span class="op">(</span><span class="va">flights</span>, <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu">degree</span><span class="op">(</span><span class="va">flights</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># compute degree centrality</span></span></span>
<span class="r-in"><span><span class="va">flights</span> <span class="op"><a href="https://rdrr.io/pkg/network/man/network.extraction.html" class="external-link">%v%</a></span> <span class="st">"degree"</span> <span class="op">&lt;-</span> <span class="fu">degree</span><span class="op">(</span><span class="va">flights</span>, gmode <span class="op">=</span> <span class="st">"digraph"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add random groups</span></span></span>
<span class="r-in"><span><span class="va">flights</span> <span class="op"><a href="https://rdrr.io/pkg/network/man/network.extraction.html" class="external-link">%v%</a></span> <span class="st">"mygroup"</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/pkg/network/man/network.size.html" class="external-link">network.size</a></span><span class="op">(</span><span class="va">flights</span><span class="op">)</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create a map of the USA</span></span></span>
<span class="r-in"><span><span class="va">usa</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="fu">map_data</span><span class="op">(</span><span class="st">"usa"</span><span class="op">)</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">long</span>, y <span class="op">=</span> <span class="va">lat</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">geom_polygon</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>group <span class="op">=</span> <span class="va">group</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    color <span class="op">=</span> <span class="st">"grey65"</span>,</span></span>
<span class="r-in"><span>    fill <span class="op">=</span> <span class="st">"#f9f9f9"</span>, linewidth <span class="op">=</span> <span class="fl">0.2</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># overlay network data to map</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ggnetworkmap</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">usa</span>, <span class="va">flights</span>,</span></span>
<span class="r-in"><span>  size <span class="op">=</span> <span class="fl">4</span>, great.circles <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  node.group <span class="op">=</span> <span class="va">mygroup</span>, segment.color <span class="op">=</span> <span class="st">"steelblue"</span>,</span></span>
<span class="r-in"><span>  ring.group <span class="op">=</span> <span class="va">degree</span>, weight <span class="op">=</span> <span class="va">degree</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">p_</span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggnetworkmap-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Exploring a community of spambots found on Twitter</span></span></span>
<span class="r-in"><span><span class="co">## Data by Amos Elberg: see ?twitter_spambots for details</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">twitter_spambots</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create a world map</span></span></span>
<span class="r-in"><span><span class="va">world</span> <span class="op">&lt;-</span> <span class="fu">fortify</span><span class="op">(</span><span class="fu">map</span><span class="op">(</span><span class="st">"world"</span>, plot <span class="op">=</span> <span class="cn">FALSE</span>, fill <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">world</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">world</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">long</span>, y <span class="op">=</span> <span class="va">lat</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">geom_polygon</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>group <span class="op">=</span> <span class="va">group</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    color <span class="op">=</span> <span class="st">"grey65"</span>,</span></span>
<span class="r-in"><span>    fill <span class="op">=</span> <span class="st">"#f9f9f9"</span>, linewidth <span class="op">=</span> <span class="fl">0.2</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># view global structure</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ggnetworkmap</span><span class="op">(</span><span class="va">world</span>, <span class="va">twitter_spambots</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">p_</span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggnetworkmap-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># domestic distribution</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ggnetworkmap</span><span class="op">(</span>net <span class="op">=</span> <span class="va">twitter_spambots</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">p_</span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggnetworkmap-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># topology</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ggnetworkmap</span><span class="op">(</span>net <span class="op">=</span> <span class="va">twitter_spambots</span>, arrow.size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">p_</span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggnetworkmap-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># compute indegree and outdegree centrality</span></span></span>
<span class="r-in"><span><span class="va">twitter_spambots</span> <span class="op"><a href="https://rdrr.io/pkg/network/man/network.extraction.html" class="external-link">%v%</a></span> <span class="st">"indegree"</span> <span class="op">&lt;-</span> <span class="fu">degree</span><span class="op">(</span><span class="va">twitter_spambots</span>, cmode <span class="op">=</span> <span class="st">"indegree"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">twitter_spambots</span> <span class="op"><a href="https://rdrr.io/pkg/network/man/network.extraction.html" class="external-link">%v%</a></span> <span class="st">"outdegree"</span> <span class="op">&lt;-</span> <span class="fu">degree</span><span class="op">(</span><span class="va">twitter_spambots</span>, cmode <span class="op">=</span> <span class="st">"outdegree"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ggnetworkmap</span><span class="op">(</span></span></span>
<span class="r-in"><span>  net <span class="op">=</span> <span class="va">twitter_spambots</span>,</span></span>
<span class="r-in"><span>  arrow.size <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>  node.group <span class="op">=</span> <span class="va">indegree</span>,</span></span>
<span class="r-in"><span>  ring.group <span class="op">=</span> <span class="va">outdegree</span>, size <span class="op">=</span> <span class="fl">4</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">scale_fill_continuous</span><span class="op">(</span><span class="st">"Indegree"</span>, high <span class="op">=</span> <span class="st">"red"</span>, low <span class="op">=</span> <span class="st">"yellow"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">labs</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"Outdegree"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">p_</span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggnetworkmap-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># show some vertex attributes associated with each account</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ggnetworkmap</span><span class="op">(</span></span></span>
<span class="r-in"><span>  net <span class="op">=</span> <span class="va">twitter_spambots</span>,</span></span>
<span class="r-in"><span>  arrow.size <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>  node.group <span class="op">=</span> <span class="va">followers</span>,</span></span>
<span class="r-in"><span>  ring.group <span class="op">=</span> <span class="va">friends</span>,</span></span>
<span class="r-in"><span>  size <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>  weight <span class="op">=</span> <span class="va">indegree</span>,</span></span>
<span class="r-in"><span>  label.nodes <span class="op">=</span> <span class="cn">TRUE</span>, vjust <span class="op">=</span> <span class="op">-</span><span class="fl">1.5</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">scale_fill_continuous</span><span class="op">(</span><span class="st">"Followers"</span>, high <span class="op">=</span> <span class="st">"red"</span>, low <span class="op">=</span> <span class="st">"yellow"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">labs</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"Friends"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">scale_color_continuous</span><span class="op">(</span>low <span class="op">=</span> <span class="st">"lightgreen"</span>, high <span class="op">=</span> <span class="st">"darkgreen"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">p_</span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggnetworkmap-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="http://schloerke.com/" class="external-link">Barret Schloerke</a>, <a href="http://www.dicook.org/" class="external-link">Di Cook</a>, <a href="https://joseph.larmarange.net/" class="external-link">Joseph Larmarange</a>, <a href="https://f.briatte.org/" class="external-link">Francois Briatte</a>, <a href="http://moritz-marbach.com/" class="external-link">Moritz Marbach</a>, <a href="https://edwinth.github.io/" class="external-link">Edwin Thoen</a>, Amos Elberg, Jason Crowley.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '038759c28b1c284f4b637d2a8c366640',
    indexName: 'ggally',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

