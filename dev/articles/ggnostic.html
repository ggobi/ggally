<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ggnostic(): Model diagnostics • GGally</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="ggnostic(): Model diagnostics">
<meta property="og:description" content="GGally">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">GGally</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">2.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    <li class="dropdown-header">Generic plot matrix</li>
    <li>
      <a href="../articles/ggpairs.html">ggpairs(): Pairwise plot matrix</a>
    </li>
    <li>
      <a href="../articles/ggduo.html">ggduo(): Two-grouped plot matrix</a>
    </li>
    <li>
      <a href="../articles/ggmatrix.html">ggmatrix(): Plot matrix</a>
    </li>
    <li>
      <a href="../articles/ggally_plots.html">ggally_*(): List of available high-level plots</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Specialized plot matrix</li>
    <li>
      <a href="../articles/ggbivariate.html">ggbivariate(): Plot an outcome with several potential explanatory variables</a>
    </li>
    <li>
      <a href="../articles/ggnostic.html">ggnostic(): Model diagnostics</a>
    </li>
    <li>
      <a href="../articles/ggscatmat.html">ggscatmat(): Numeric pairwise plot matrix</a>
    </li>
    <li>
      <a href="../articles/ggtable.html">ggtable(): Cross-tabulated tables</a>
    </li>
    <li>
      <a href="../articles/ggally_stats.html">stat_*(): Additional statistics for ggplot2</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Specialized ggplot2 plot</li>
    <li>
      <a href="../articles/ggcoef_model.html">ggcoef_model(): Model coefficients</a>
    </li>
    <li>
      <a href="../articles/ggcoef.html">ggcoef(): Model coefficients</a>
    </li>
    <li>
      <a href="../articles/ggnetworkmap.html">ggnetworkmap(): Network + map plot</a>
    </li>
    <li>
      <a href="../articles/ggsurv.html">ggsurv(): Survival curves</a>
    </li>
    <li>
      <a href="../articles/glyph.html">glyphs(): Glyph plot</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ggobi/ggally/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ggnostic_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>ggnostic(): Model diagnostics</h1>
                        <h4 class="author">Barret Schloerke</h4>
            
            <h4 class="date">Oct 1, 2016</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ggobi/ggally/blob/master/vignettes/ggnostic.Rmd"><code>vignettes/ggnostic.Rmd</code></a></small>
      <div class="hidden name"><code>ggnostic.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggobi.github.io/ggally/">GGally</a></span><span class="op">)</span>
<span class="co">#&gt; Loading required package: ggplot2</span>
<span class="co">#&gt; Registered S3 method overwritten by 'GGally':</span>
<span class="co">#&gt;   method from   </span>
<span class="co">#&gt;   +.gg   ggplot2</span></code></pre></div>
<div id="ggallyggnostic" class="section level1">
<h1 class="hasAnchor">
<a href="#ggallyggnostic" class="anchor"></a><code>GGally::ggnostic()</code>
</h1>
<p><code><a href="../reference/ggnostic.html">ggnostic()</a></code> is a display wrapper to <code><a href="../reference/ggduo.html">ggduo()</a></code> that displays full model diagnostics for each given explanatory variable. By default, <code><a href="../reference/ggduo.html">ggduo()</a></code> displays the residuals, leave-one-out model sigma value, leverage points, and Cook’s distance against each explanatory variable. The rows of the plot matrix can be expanded to include fitted values, standard error of the fitted values, standardized residuals, and any of the response variables. If the model is a linear model, stars are added according to the <code><a href="https://rdrr.io/r/stats/anova.html">stats::anova</a></code> significance of each explanatory variable.</p>
<p>Most diagnostic plots contain reference line(s) to help determine if the model is fitting properly</p>
<ul>
<li>
<strong>residuals:</strong>
<ul>
<li>Type key: <code>".resid"</code>
</li>
<li>A solid line is located at the expected value of 0 with dashed lines at the 95% confidence interval. (<span class="math inline">\(0 \pm 1.96 * \sigma\)</span>)</li>
<li>Plot function: <code><a href="../reference/ggally_nostic_resid.html">ggally_nostic_resid()</a></code>.</li>
<li>See also <code><a href="https://rdrr.io/r/stats/residuals.html">stats::residuals</a></code>
</li>
</ul>
</li>
<li>
<strong>standardized residuals:</strong>
<ul>
<li>Type key: <code>".std.resid"</code>
</li>
<li>Same as residuals, except the standardized residuals equal the regular residuals divided by sigma. The dashed lines are located at <span class="math inline">\(0 \pm 1.96 * 1\)</span>.</li>
<li>Plot function: <code><a href="../reference/ggally_nostic_std_resid.html">ggally_nostic_std_resid()</a></code>.</li>
<li>See also <code><a href="https://rdrr.io/r/stats/influence.measures.html">stats::rstandard</a></code>
</li>
</ul>
</li>
<li>
<strong>leave-one-out model sigma:</strong>
<ul>
<li>Type key: <code>".sigma"</code>
</li>
<li>A solid line is located at the full model’s sigma value.</li>
<li>Plot function: <code><a href="../reference/ggally_nostic_sigma.html">ggally_nostic_sigma()</a></code>.</li>
<li>See also <code><a href="https://rdrr.io/r/stats/lm.influence.html">stats::influence</a></code>’s value on <code>sigma</code>
</li>
</ul>
</li>
<li>
<strong>leverage points:</strong>
<ul>
<li>Type key: <code>".hat"</code>
</li>
<li>The expected value for the diagonal of a hat matrix is <span class="math inline">\(p / n\)</span>. Points are considered leverage points if they are large than <span class="math inline">\(2 * p / n\)</span>, where the higher line is drawn.</li>
<li>Plot function: <code><a href="../reference/ggally_nostic_hat.html">ggally_nostic_hat()</a></code>.</li>
<li>See also <code><a href="https://rdrr.io/r/stats/lm.influence.html">stats::influence</a></code>’s value on <code>hat</code>
</li>
</ul>
</li>
<li>
<strong>Cook’s distance:</strong>
<ul>
<li>Type key: <code>".cooksd"</code>
</li>
<li>Points that are larger than <span class="math inline">\(4 / n\)</span> line are considered highly influential points. Plot function: <code><a href="../reference/ggally_nostic_cooksd.html">ggally_nostic_cooksd()</a></code>. See also <code><a href="https://rdrr.io/r/stats/influence.measures.html">stats::cooks.distance()</a></code>
</li>
</ul>
</li>
<li>
<strong>fitted points:</strong>
<ul>
<li>Type key: <code>".fitted"</code>
</li>
<li>No reference lines by default.</li>
<li>Default plot function: <code><a href="../reference/ggally_points.html">ggally_points()</a></code>.</li>
<li>See also <code><a href="https://rdrr.io/r/stats/predict.html">stats::predict</a></code>
</li>
</ul>
</li>
<li>
<strong>standard error of fitted points</strong>:
<ul>
<li>Type key: <code>".se.fit"</code>
</li>
<li>No reference lines by default.</li>
<li>Plot function: <code><a href="../reference/ggally_nostic_se_fit.html">ggally_nostic_se_fit()</a></code>.</li>
<li>See also <code><a href="https://rdrr.io/r/stats/fitted.values.html">stats::fitted</a></code>
</li>
</ul>
</li>
<li>
<strong>response variables:</strong>
<ul>
<li>Type key: (response name in data.frame)</li>
<li>No reference lines by default.</li>
<li>Default plot function: <code><a href="../reference/ggally_points.html">ggally_points()</a></code>.</li>
</ul>
</li>
</ul>
<div id="life-expectancy-model-fitting" class="section level2">
<h2 class="hasAnchor">
<a href="#life-expectancy-model-fitting" class="anchor"></a>Life Expectancy Model Fitting</h2>
<p>Looking at the dataset <code><a href="https://rdrr.io/r/datasets/state.html">datasets::state.x77</a></code>, we will fit a multiple regression model for Life Expectancy.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># make a data.frame and fix column names</span>
<span class="va">state</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">state.x77</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">state</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Life.Exp"</span>, <span class="st">"HS.Grad"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">state</span><span class="op">)</span>
<span class="co">#&gt; 'data.frame':    50 obs. of  8 variables:</span>
<span class="co">#&gt;  $ Population: num  3615 365 2212 2110 21198 ...</span>
<span class="co">#&gt;  $ Income    : num  3624 6315 4530 3378 5114 ...</span>
<span class="co">#&gt;  $ Illiteracy: num  2.1 1.5 1.8 1.9 1.1 0.7 1.1 0.9 1.3 2 ...</span>
<span class="co">#&gt;  $ Life.Exp  : num  69 69.3 70.5 70.7 71.7 ...</span>
<span class="co">#&gt;  $ Murder    : num  15.1 11.3 7.8 10.1 10.3 6.8 3.1 6.2 10.7 13.9 ...</span>
<span class="co">#&gt;  $ HS.Grad   : num  41.3 66.7 58.1 39.9 62.6 63.9 56 54.6 52.6 40.6 ...</span>
<span class="co">#&gt;  $ Frost     : num  20 152 15 65 20 166 139 103 11 60 ...</span>
<span class="co">#&gt;  $ Area      : num  50708 566432 113417 51945 156361 ...</span>

<span class="co"># fit full model</span>
<span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">Life.Exp</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">state</span><span class="op">)</span>
<span class="co"># reduce to "best fit" model with</span>
<span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/step.html">step</a></span><span class="op">(</span><span class="va">model</span>, trace <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; lm(formula = Life.Exp ~ Population + Murder + HS.Grad + Frost, </span>
<span class="co">#&gt;     data = state)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Residuals:</span>
<span class="co">#&gt;      Min       1Q   Median       3Q      Max </span>
<span class="co">#&gt; -1.47095 -0.53464 -0.03701  0.57621  1.50683 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficients:</span>
<span class="co">#&gt;               Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="co">#&gt; (Intercept)  7.103e+01  9.529e-01  74.542  &lt; 2e-16 ***</span>
<span class="co">#&gt; Population   5.014e-05  2.512e-05   1.996  0.05201 .  </span>
<span class="co">#&gt; Murder      -3.001e-01  3.661e-02  -8.199 1.77e-10 ***</span>
<span class="co">#&gt; HS.Grad      4.658e-02  1.483e-02   3.142  0.00297 ** </span>
<span class="co">#&gt; Frost       -5.943e-03  2.421e-03  -2.455  0.01802 *  </span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Residual standard error: 0.7197 on 45 degrees of freedom</span>
<span class="co">#&gt; Multiple R-squared:  0.736,  Adjusted R-squared:  0.7126 </span>
<span class="co">#&gt; F-statistic: 31.37 on 4 and 45 DF,  p-value: 1.696e-12</span></code></pre></div>
<p>Next, we look at the variables for any high (|value| &gt; 0.8) correlation values and general interaction behavior.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># look at variables for high correlation (none)</span>
<span class="fu"><a href="../reference/ggscatmat.html">ggscatmat</a></span><span class="op">(</span><span class="va">state</span>, columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Population"</span>, <span class="st">"Murder"</span>, <span class="st">"HS.Grad"</span>, <span class="st">"Frost"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="ggnostic_files/figure-html/nostic_scatmat-1.png" width="700"></p>
<p>All variables appear to be ok. Next, we look at the model diagnostics.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># look at model diagnostics</span>
<span class="fu"><a href="../reference/ggnostic.html">ggnostic</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span></code></pre></div>
<p><img src="ggnostic_files/figure-html/nostic_diag-1.png" width="700"></p>
<ul>
<li>The residuals appear to be normally distributed. There are a couple residual outliers, but 2.5 outliers are expected.</li>
<li>There are 5 leverage points according the diagonal of the hat matrix</li>
<li>There are 2 leverage points according to Cook’s distance. One is <strong>much</strong> larger than the other.</li>
</ul>
<p>Let’s remove the largest data point first to try and define a better model.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># very high life expectancy</span>
<span class="va">state</span><span class="op">[</span><span class="fl">11</span>, <span class="op">]</span>
<span class="co">#&gt;        Population Income Illiteracy Life.Exp Murder HS.Grad Frost Area</span>
<span class="co">#&gt; Hawaii        868   4963        1.9     73.6    6.2    61.9     0 6425</span>
<span class="va">state_no_hawaii</span> <span class="op">&lt;-</span> <span class="va">state</span><span class="op">[</span><span class="op">-</span><span class="fl">11</span>, <span class="op">]</span>
<span class="va">model_no_hawaii</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">Life.Exp</span> <span class="op">~</span> <span class="va">Population</span> <span class="op">+</span> <span class="va">Murder</span> <span class="op">+</span> <span class="va">HS.Grad</span> <span class="op">+</span> <span class="va">Frost</span>, data <span class="op">=</span> <span class="va">state_no_hawaii</span><span class="op">)</span>
<span class="fu"><a href="../reference/ggnostic.html">ggnostic</a></span><span class="op">(</span><span class="va">model_no_hawaii</span><span class="op">)</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span></code></pre></div>
<p><img src="ggnostic_files/figure-html/nostic_no_hawaii-1.png" width="700"></p>
<p>There are no more outrageous Cook’s distance values. The model without Hawaii appears to be a good fitting model.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; lm(formula = Life.Exp ~ Population + Murder + HS.Grad + Frost, </span>
<span class="co">#&gt;     data = state)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Residuals:</span>
<span class="co">#&gt;      Min       1Q   Median       3Q      Max </span>
<span class="co">#&gt; -1.47095 -0.53464 -0.03701  0.57621  1.50683 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficients:</span>
<span class="co">#&gt;               Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="co">#&gt; (Intercept)  7.103e+01  9.529e-01  74.542  &lt; 2e-16 ***</span>
<span class="co">#&gt; Population   5.014e-05  2.512e-05   1.996  0.05201 .  </span>
<span class="co">#&gt; Murder      -3.001e-01  3.661e-02  -8.199 1.77e-10 ***</span>
<span class="co">#&gt; HS.Grad      4.658e-02  1.483e-02   3.142  0.00297 ** </span>
<span class="co">#&gt; Frost       -5.943e-03  2.421e-03  -2.455  0.01802 *  </span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Residual standard error: 0.7197 on 45 degrees of freedom</span>
<span class="co">#&gt; Multiple R-squared:  0.736,  Adjusted R-squared:  0.7126 </span>
<span class="co">#&gt; F-statistic: 31.37 on 4 and 45 DF,  p-value: 1.696e-12</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">model_no_hawaii</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; lm(formula = Life.Exp ~ Population + Murder + HS.Grad + Frost, </span>
<span class="co">#&gt;     data = state_no_hawaii)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Residuals:</span>
<span class="co">#&gt;      Min       1Q   Median       3Q      Max </span>
<span class="co">#&gt; -1.48967 -0.50158  0.01999  0.54355  1.11810 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficients:</span>
<span class="co">#&gt;               Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="co">#&gt; (Intercept)  7.106e+01  8.998e-01  78.966  &lt; 2e-16 ***</span>
<span class="co">#&gt; Population   6.363e-05  2.431e-05   2.618   0.0121 *  </span>
<span class="co">#&gt; Murder      -2.906e-01  3.477e-02  -8.357 1.24e-10 ***</span>
<span class="co">#&gt; HS.Grad      3.728e-02  1.447e-02   2.576   0.0134 *  </span>
<span class="co">#&gt; Frost       -3.099e-03  2.545e-03  -1.218   0.2297    </span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Residual standard error: 0.6796 on 44 degrees of freedom</span>
<span class="co">#&gt; Multiple R-squared:  0.7483, Adjusted R-squared:  0.7254 </span>
<span class="co">#&gt; F-statistic: 32.71 on 4 and 44 DF,  p-value: 1.15e-12</span></code></pre></div>
<p>Since there is only a marginal improvement by removing Hawaii, the original model should be used to explain life expectancy.</p>
</div>
<div id="full-diagnostic-plot-matrix-example" class="section level2">
<h2 class="hasAnchor">
<a href="#full-diagnostic-plot-matrix-example" class="anchor"></a>Full diagnostic plot matrix example</h2>
<p>The following lines of code will display different model diagnostic plot matrices for the same statistical model. The first one is of the default settings. The second adds color according to the <code>species</code>. Finally, the third displays all possible columns and uses <code><a href="../reference/ggally_smooth.html">ggally_smooth()</a></code> to display the fitted points and response variables.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">flea_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/step.html">step</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">head</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">flea</span><span class="op">)</span>, trace <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">flea_model</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; lm(formula = head ~ species + tars1 + tars2 + aede1, data = flea)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Residuals:</span>
<span class="co">#&gt;     Min      1Q  Median      3Q     Max </span>
<span class="co">#&gt; -3.0152 -1.2315 -0.0048  1.1490  3.6068 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficients:</span>
<span class="co">#&gt;                  Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="co">#&gt; (Intercept)       0.63693    6.09162   0.105 0.917034    </span>
<span class="co">#&gt; speciesHeikert.   1.13651    1.25452   0.906 0.368171    </span>
<span class="co">#&gt; speciesHeptapot.  5.22207    0.92110   5.669 3.18e-07 ***</span>
<span class="co">#&gt; tars1             0.06815    0.01989   3.426 0.001043 ** </span>
<span class="co">#&gt; tars2             0.10160    0.03297   3.081 0.002974 ** </span>
<span class="co">#&gt; aede1             0.17069    0.04275   3.993 0.000163 ***</span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Residual standard error: 1.6 on 68 degrees of freedom</span>
<span class="co">#&gt; Multiple R-squared:  0.685,  Adjusted R-squared:  0.6618 </span>
<span class="co">#&gt; F-statistic: 29.57 on 5 and 68 DF,  p-value: 7.997e-16</span>
<span class="co"># default output</span>
<span class="fu"><a href="../reference/ggnostic.html">ggnostic</a></span><span class="op">(</span><span class="va">flea_model</span><span class="op">)</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span></code></pre></div>
<p><img src="ggnostic_files/figure-html/nostic_flea-1.png" width="700"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># color'ed output</span>
<span class="fu"><a href="../reference/ggnostic.html">ggnostic</a></span><span class="op">(</span><span class="va">flea_model</span>, mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span></code></pre></div>
<p><img src="ggnostic_files/figure-html/nostic_flea-2.png" width="700"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># full color'ed output</span>
<span class="fu"><a href="../reference/ggnostic.html">ggnostic</a></span><span class="op">(</span>
  <span class="va">flea_model</span>,
  mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">species</span><span class="op">)</span>,
  columnsY <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"head"</span>, <span class="st">".fitted"</span>, <span class="st">".se.fit"</span>, <span class="st">".resid"</span>, <span class="st">".std.resid"</span>, <span class="st">".hat"</span>, <span class="st">".sigma"</span>, <span class="st">".cooksd"</span><span class="op">)</span>,
  continuous <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>default <span class="op">=</span> <span class="va">ggally_smooth</span>, .fitted <span class="op">=</span> <span class="va">ggally_smooth</span><span class="op">)</span>
<span class="op">)</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span>
<span class="co">#&gt; `geom_smooth()` using method = 'loess'</span></code></pre></div>
<p><img src="ggnostic_files/figure-html/nostic_flea-3.png" width="700"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="http://schloerke.com/">Barret Schloerke</a>, <a href="http://www.dicook.org/">Di Cook</a>, <a href="https://joseph.larmarange.net/">Joseph Larmarange</a>, <a href="https://f.briatte.org/">Francois Briatte</a>, <a href="http://moritz-marbach.com/">Moritz Marbach</a>, <a href="https://edwinth.github.io/">Edwin Thoen</a>, Amos Elberg, Jason Crowley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '038759c28b1c284f4b637d2a8c366640',
    indexName: 'ggally',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
